# 널값 및 의사코드 규약
<br/>

코딩 예제를 살펴보기 전에, 이 책의 의사코드 예제에서 어떻게 널값을 다루는지 설명하겠다.

많은 프로그래밍 언어에는 값(또는 참조/포인터)이 없다는 개념을 가지고 있다. 이 개념을 표현하기 위해 프로그래밍 언어는 널(null)값을 사용한다.
이 널값은 믿을 수 없을 정도로 유용하면서 동시에 믿을 수 없을 정도로 문제가 많은 양극단의 역사를 가지고 있다.

- 값이 제공되지 않거나 함수가 원하는 결과를 반환할 수 없는 경우가 자주 발생하기 때문에 '값이 없다' 또는 '부재한다'는 이 개념은 유용하다.
- 값이 널일 수 있거나 혹은 널이면 안 되는 경우가 항상 명백한 것은 아니라서 문제가 발생한다. 또한, 개발자들은 변수에 액세스하기 전에 널값인지 확인하는 것을 자주 잊어버린다.
  이 경우 오류가 발생하는 경우가 많다.<br/>
  NullPointerException, NullReferenceException, Cannot read property of null과 같은 에러를 본 적이 있을 것이고 실제 자신이 기억하는 것보다 많이 접했을 것이다.

널값이 문제의 소지가 많기 때문에 어떤 사람은 널값을 사용하지 말아야 한다고 주장하고, 적어도 함수가 널값을 반환하지 않아야 한다고 조언한다.
널값 문제를 피하기 위해서는 이렇게 하는 것이 확실하게 도움이 되지만, 실제 코드를 작성할 때 이 조언대로 하려면 많은 연습이 필요하다.

다행스럽게도 최근 몇 년 동안 **널 안전성**(null safety) 혹은 **보이드 안전성**(void safety)에 대한 생각이 점점 더 많은 추진력을 얻고 있다.
이렇게 하면 널값이 가능한 변수가 반환값을 그에 맞게 표시해야 하고 컴파일러는 반드시 널값 여부 확인을 할 수밖에 없도록 만든다.

최근 몇 년간 새로 등장한 중요한 언어들 대부분은 널 안전성을 지원한다. 또한 C#과 같은 언어는 최신 버전에서 선택적으로 사용할 수 있으며, 심지어 자바에서도 이것을 사용할 수 있는 방법이 있다.
사용 중인 언어가 널 안전성을 지원한다면 사용하는 것이 좋다.

사용 중인 언어가 널 안전성을 지원하지 않는다면, 널값을 사용하는 대신 `옵셔널(Optional)` 타입을 사용하는 것이 좋다.
자바(Java), 러스트(Rust, 옵셔널이 아닌 옵션(Option)으로 부름) 및 C++을 포함한 많은 언어가 이것을 지원한다(C++에서는 고려해야 할 미묘한 차이가 있다).
표준 기능으로 지원하지 않는 언어에서도 타사 유틸리티를 통해 지원되는 경우가 많다.

이 책에서 사용되는 의사코드는 널 안전성이 있다고 가정한다. 기본적으로 변수, 함수의 매개변수 및 반환 유형은 모두 널값을 가질 수 없다.
그러나 데이터 유형 이름의 끝에 '?' 기호가 붙어 있으면 널값을 가질 수 있다는 의미이고 이때는 널값 여부를 확인하지 않고서는 사용할 수 없도록 컴파일러가 강제한다.
아래 코드는 널 안전성을 사용하는 예를 보여준다.

```java
Element? getFifthElement(List<Element> elements) {   // 'Element?'에서 '?'는 이 함수의 반환값이 널값일 수 있음을 나타낸다
  if (elements.size() < 5) {
    return null;  // 값을 얻을 수 없는 경우에는 널값을 반환한다.
  }
  return elements[4];
}
```
아래 코드는 사용 중인 언어가 널 안전성을 지원하지 않는 경우 Optional 타입을 사용하여 이 함수를 다시 작성한 코드다.
```java
Optional<Element> getFifthElement(List<Element> elements) {  // 반환값의 타입은 Optional Element다
  if (elements.size() < 5) {
    return Optional.empty();  // Optional.empty()가 널값 대신 반환된다.
  }
  return Optional.of(elements[4]);
}
```
