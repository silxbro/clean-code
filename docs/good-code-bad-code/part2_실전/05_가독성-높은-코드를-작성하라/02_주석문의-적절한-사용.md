# 주석문의 적절한 사용
<br/>

코드 내에서 주석문이나 문서화는 다음과 같은 다양한 목적을 수행할 수 있다.
- 코드가 **무엇**을 하는지 설명
- 코드가 **왜** 그 일을 하는지 설명
- 사용 지침 등 기타 정보 제공

이번 절에서는 이 중 처음 두 가지, 즉 무엇을 하는지, 왜 하는지를 설명하기 위해 주석문을 사용하는 것에 관해 중점적으로 설명한다.
사용 지침과 같은 기타 정보는 일반적으로 코드 계약의 일부를 구성하며 3장에서 논의했다.

클래스와 같이 큰 단위의 코드가 무엇을 하는지 요약하는 **높은 수준에서의 주석문은 유용**하다.
그러나 하위 수준에서 한 줄 한 줄 코드가 무엇을 하는지 설명하는 주석문은 가독성을 높이기 위한 효과적인 방법이 아니다.
서술적인 이름으로 잘 작성된 코드는 그 자체로 줄 단위에서 무엇을 하는지 설명한다.
코드의 기능을 설명하기 위해 낮은 층위의 주석문을 많이 추가해야 한다면, 이것은 코드 자체의 가독성이 떨어진다는 신호다.

반면에 코드가 왜 그 일을 하는지에 대한 **이유나 배경을 설명하는 주석문**은 유용할 때가 많은데, 코드만으로는 이를 명확히 할 수 없기 때문이다.

#### [상식의 사용]
이번 절에서는 주석문의 사용 방법과 시기에 대한 일반적인 지침을 제공하지만 이것이 반드시 따라야 할 엄격한 규칙은 아니다.<br/>
어떻게 해야 이해하기 쉽고 유지보수하기 쉬운 코드를 작성할 수 있을지는 상식적으로 생각하면 된다.
어렵고 복잡한 비트 논리를 쓸 수밖에 없다거나, 코드를 최적화하기 위해 몇 가지 번뜩이는 트릭을 반드시 사용해야 한다면,
낮은 층위에서 코드가 무엇을 하는지 설명하는 주석문이 유용할 것이다.
<br/>
<br/>
## 1. 중복된 주석문은 유해할 수 있다
예제 5.4의 코드에서는 성과 이름을 마침표로 연결해서 ID를 생성한다. 주석문을 사용해서 코드가 하는 일을 설명하지만 코드 자체로 설명이 되기 때문에 이 주석문은 쓸모가 없다.

#### [예제 5.4] 코드가 수행하는 작업을 설명하는 주석문
```java
String generateId(String firstName, String lastName) {
  // "{이름}.{성}"의 형태로 ID를 생성한다.
  return firstName + "." + lastName;
}
```
이런 불필요한 주석문은 다음과 같은 이유로 인해 단지 쓸모없는 것 이상으로 더 나쁠 수 있다.
- 개발자는 주석문을 유지보수해야 한다. 코드를 변경하면 주석문 역시 수정해야 한다.
- 코드를 지저분하게 만든다. 모든 코드 줄이 이와 같은 관련 주석을 갖고 있다고 상상해보라. 100줄의 코드를 읽으려면 100줄의 코드와 100개의 주석문을 읽어야 한다.
  이런 주석문은 추가적인 정보를 제공하지 않기 때문에 개발자의 시간만 낭비할 뿐이다.

이 코드에서는 주석문을 지우고 코드가 그 자체로 설명하도록 하는 것이 더 좋다.

## 2. 주석문으로 가독성 높은 코드를 대체할 수 없다
예제 5.5는 이전 예제 코드와 동일하게 마침표를 사용하여 성과 이름을 결합함으로써 ID를 생성한다.
하지만 이번에는 이름과 성이 배열의 첫 번째와 두 번째 요소로 주어지기 때문에 코드 자체만 보면 이에 대한 것을 알 수 없다.
따라서 이 코드에는 이에 대해 설명하는 주석문이 있다.
여기에서 코드 자체로 명확하지 않기 때문에 주석문이 유용한 것처럼 보이지만, 진짜 문제는 코드가 읽기 쉽도록 작성되지 않았다는 점이다.

#### [예제 5.5] 주석문이 있는 이해하기 어려운 코드
```java
String generateId(String[] data) {
  // data[0]는 유저의 이름이고 data[1]은 성이다.
  // "{이름}.{성}"의 형태로 ID를 생성한다.
  return data[0] + "." + data[1];
}
```
코드 자체가 가독성이 좋지 않기 때문에 주석문이 필요하지만 더 나은 접근법은 가독성이 좋은 코드를 작성하는 것이다.
이 시나리오에서는 잘 명명된 헬퍼 함수를 사용하면 가독성 높은 코드를 쉽게 작성할 수 있다. 다음 예제 코드는 이것을 보여준다.

#### [예제 5.6] 가독성이 더 좋아진 코드
```java
String generateId(String[] data) {
  return firstName(data) + "." + lastName(data);
}

String firstName(String[] data) {
  return data[0];
}

String secondName(String[] data) {
  return data[1];
}
```
코드 자체로 설명이 되도록 코드를 작성하면 유지 및 관리의 과도한 비용을 줄이고, 주석문의 내용이 업데이트되지 않거나 잘못될 가능성을 없애주기 때문에
주석문을 사용하는 것보다 더 선호될 때가 많다.

## 3. 주석문은 코드의 이유를 설명하는 데 유용하다
코드가 그 일을 **왜** 수행하는지는 코드 자체로는 설명하기 어렵다.
**특정 코드가 존재하는 이유나 어떤 일을 수행하는 목적**은 코드를 파악하고자 하는 다른 개발자가 알 수 없는 배경 상황이나 지식과 관련 있을 수 있다.

이러한 배경 상황이나 지식이 코드를 이해하거나 안전하게 수정하기 위해 중요한 경우 주석문은 매우 유용하다.
다음과 같은 경우에는 주석문을 사용해 코드가 존재하는 이유를 설명하면 좋다.
- 제품 또는 비즈니스 의사 결정
- 이상하고 명확하지 않은 버그에 대한 해결책
- 의존하는 코드의 예상을 벗어나는 동작에 대처

예제 5.7은 사용자의 ID를 얻는 함수가 포함되어 있다. 이 함수는 사용자가 언제 가입했는지에 따라 두 가지 다른 방법으로 ID를 생성한다.
코드만으로는 그렇게 하는 이유가 분명하지 않을 것이므로 주석문을 사용하여 설명한다.
이를 통해 다른 개발자가 코드를 혼동하는 것을 방지하고, 이 코드를 수정해야 할 경우 어떤 고려 사항이 적용되는지 알 수 있다.

#### [예제 5.7] 코드가 존재하는 이유를 설명하는 주석문
```java
class User {
  private final Int usernme;
  private final String firstName;
  private final String lastName;
  private final Version signupVersion;
  ...

  String getUserId() {
    if (signupVersion.isOlderThan("2.0")) {
      // (v2.0 이전에 등록한) 레거시 유저는 이름으로 ID가 부여된다.  ---> 어떤 코드가 왜 존재하는지 이유를 설명하는 주석문
      // 자세한 내용은 #4218 이슈를 보라.
      return firstName.toLowerCase() + "." +
          lastName.toLowerCase();
    }
    // (v2.0 이후로 등록한) 새 유저는 username으로 ID가 부여된다.  ---> 어떤 코드가 왜 존재하는지 이유를 설명하는 주석문
    return username;
  }
  ...
}
```
이것은 코드를 약간 지저분하게 만들지만, 이로 인해 얻는 이점이 더 크다. 주석문 없이 코드만으로는 혼란을 일으킬 수 있다.

## 4. 주석문은 유용한 상위 수준의 요약 정보를 제공할 수 있다
코드가 무슨 일을 하는지 설명하는 주석문과 문서는 마치 책을 읽을 때 줄거리와 같다.
- 책을 읽으려고 하는데 모든 페이지의 모든 단락 앞에 한 문장짜리 줄거리가 있다면 꽤 성가시고 읽기 어려운 책이 될 것이다.
  코드가 무엇을 하는지 설명하는 하위 수준의 주석문은 마치 이와 같아서 가독성이 오히려 떨어진다.
- 반면에 책의 뒤표지나 각 장의 시작 부분에 내용을 간략하게 요약해서 보여주면 매우 유용할 수 있다.
  독자는 그 책이나 해당 장의 내용이 자신에게 유용한지 혹은 흥미로운지 빠르게 확인할 수 있다. 클래스가 하는 일을 요약한 상위 수준의 주석문은 마치 이와 같다.
  다른 개발자는 그 클래스가 그들에게 유용한지 혹은 그것이 어떤 영향을 미칠지 쉽게 가늠해볼 수 있다.

코드 기능에 대한 상위 수준에서의 개략적인 문서는 다음과 같은 경우에 유용하다.
- 클래스가 수행하는 작업 및 다른 개발자가 알고 있어야 할 중요한 세부 사항을 개괄적으로 설명하는 문서
- 함수에 대한 입력 매개변수 또는 기능을 설명하는 문서
- 함수의 반환값이 무엇을 나타내는지 설명하는 문서

3장에서 설명했던 내용도 기억하는 것이 좋다. 문서가 중요하지만 개발자들이 읽지 않는 경우가 많다는 사실에 현실적으로 대처해야 한다.
따라서 예측대로 실행되고 오용을 방지하는 코드를 작성하려고 할 때, 문서나 주석문에 너무 많이 의존하지 않는 것이 바람직하다.
(6장 및 7장에서는 이를 위한 보다 효과적인 기술을 다룰 것이다.)

예제 5.8은 User 클래스가 전체적으로 수행하는 작업을 요약하기 위해 주석문을 사용하는 방법을 보여준다.
이것은 '스트리밍 서비스'의 사용자와 관련이 있고 잠재적으로 데이터베이스와 동기화되지 않을 수 있다는 사실과 같은 몇 가지 유용한 상위 수준의 정보를 제공한다.

#### [예제 5.8] 클래스에 대한 상위 수준의 문서화
```java
/**
 * 스트리밍 서비스의 유저에 대한 자세한 사항을 갖는다.
 *
 * 이 클래스는 데이터베이스에 직접 연결하지 않는다. 대신 메모리에 저장된 값으로 생성된다.
 * 따라서 이 클래스가 생성된 이후에 데이터베이스에서 이뤄진 변경 사항을 반영하지 않을 수 있다.
 */
class User {
  ...
}
```

주석과 문서화는 코드만으로는 전달할 수 없는 세부 사항을 설명하거나 코드가 큰 단위에서 하는 일을 요약하는 데 유용하다.
단점으로는 이런 주석문과 문서도 유지 및 보수가 필요하고 내용이 제때 업데이트되지 않으면 코드와 맞지 않게 되고 코드가 지저분해질 수 있다.
따라서 주석과 문서화를 효과적으로 사용하기 위해서는 이런 장단점 사이에서 균형 잡힌 접근법이 필요하다.
