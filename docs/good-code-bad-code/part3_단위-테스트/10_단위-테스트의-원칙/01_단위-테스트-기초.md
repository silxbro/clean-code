# 단위 테스트 기초
<br/>

전문 개발자로서 소프트웨어를 작성한 적이 없다면 단위 테스트를 해본 적이 없을 것이다.
그런 독자라면 이 장과 다음 장을 이해하는 데 필요한 중요한 세부 내용을 이 절에서 신속하게 살펴볼 수 있다.

단위 테스트와 관련하여 기억해야 할 몇 가지 중요한 개념과 용어는 다음과 같다.
- **테스트 중인 코드**(code under test)
  - '실제 코드'라고도 하고 테스트의 대상이 되는 코드를 의미한다.
- **테스트 코드**(test code)
  - 단위 테스트를 구성하는 코드를 가리킨다.
    테스트 코드는 일반적으로 '실제 코드'와는 별도의 파일에 있지만, 실제 코드의 파일과 테스트 코드의 파일 사이에 일대일 매핑이 있는 경우가 많기 때문에
    GuestList.lang이라는 파일에 실제 코드가 있다면 단위 테스트 코드는 GuestListTest.lang이라는 파일에 있다.
    때로는 실제 코드와 테스트 코드가 같은 디렉터리에 서로 나란히 있기도 하고, 때로는 테스트 코드가 코드베이스의 완전히 다른 부분에 있을 때도 있다.
    이것은 언어마다 팀마다 다르다.
- **테스트 케이스**(test case)
  - 테스트 코드의 각 파일에는 일반적으로 여러 테스트 케이스가 있고, 각 테스트 케이스는 특정 동작이나 시나리오를 테스트한다.
    실제로 테스트 케이스는 일반적으로 함수이고 가장 단순한 테스트 케이스가 아니라면 보통 다음과 같이 세 개의 섹션으로 나뉘어져 있다.
    - **준비**(arrange)
      - 테스트할 특정 동작을 호출하려면 먼저 몇 가지 설정을 수행해야 하는 경우가 많다.
        예를 들어 일부 테스트 값을 정의하거나, 의존성을 설정하거나, 테스트 대상이 되는 클래스의 인스턴스를 올바르게 설정하고 생성하는 것 등이 포함된다.
        이것은 종종 테스트 케이스의 시작 부분에서 별개의 코드 블록으로 배치된다.
    - **실행**(act)
      - 테스트 중인 동작으 실제로 호출하는 코드를 나타낸다. 이것은 일반적으로 테스트 대상이 되는 코드에 존재하는 함수를 호출하는 것을 수반한다.
    - **단언**(assert)
      - 테스트 중인 동작이 실행되고 나면 실제로 올바른 일이 발생했는지 확인해야 한다.
        여기에는 일반적으로 반환값이 예상한 값과 같거나 일부 결과 상태가 예상과 같은지 확인하는 작업이 포함된다.
  - **테스트 러너**(test runner)
    - 이름에서 알 수 있듯이 테스트 러너는 실제로 테스트를 실행하는 도구다.
      테스트 코드 파일(또는 테스트 코드의 여러 파일)이 주어지면 각 테스트 케이스를 실행하고 통과 혹은 실패한 케이스에 대한 자세한 결과를 출력한다.

다음 그림은 이 개념과 용어들이 서로 어떻게 연결되는지 보여준다.

#### [다양한 단위 테스트 개념의 연관성]
<img src="https://github.com/silxbro/clean-code/assets/142463332/fa707fb0-6d5d-41ba-b5a8-cae88d36fd8c" width="600" height="750"/><br/>

#### [주어진(given), 때(when), 그리고 나면(then)]
일부 개발자는 준비, 실행, 단언이라는 용어보다 주어진(given), 때(when), 그리고 나면(then)이라는 용어를 선호한다.
테스트 철학에 따라 이러한 다른 용어를 사용하는 것을 옹호하는 듯한 뉘앙스가 있지만, 테스트 케이스 내의 코드의 맥락에서 보면 용어가 의미하는 바는 동일하다.
<br/>
<br/>
테스트의 중요성은 너무 자주 언급되어 진부하게 들릴 수 있다. 진부하든 아니든 테스트는 중요하다.
요즘 대부분의 전문적인 소프트웨어 개발 환경에서는 거의 모든 '실제 코드'에 단위 테스트가 동반되는 것으로 생각한다.
그리고 '실제 코드'가 보여주는 모든 동작에는 테스트 케이스가 있을 것이라고 예상한다. 이것이 이상적이고 그렇게 되도록 노력해야 한다.

기존 코드의 일부가 이러한 이상이나 기대에 부응하지 못하고 특히 테스트가 부실한 코드베이스를 쉽게 발견할 수 있을 것이다.
하지만 그런 코드가 존재한다고 해서 이런 이상에서 벗어나 우리 자신의 기준을 낮추기 위한 변명이 돼서는 안 된다.
나쁘거나 부적절하게 테스트된 코드는 언젠가 사고가 날 수밖에 없다.
길건 짧건 소프트웨어를 개발해 온 개발자라면 대부분 형편없는 테스트로 인해 겪었던 몇 가지 공포스러운 경험담을 말할 수 있을 것이다.

형편없는 테스트라고 말할 수 있는 가장 명백한 경우는 테스트가 아예 존재하지 않는 경우지만, 이것만이 유일한 경우는 아니다.
훌륭한 테스트를 하기 위해서는 테스트만 있다고 되는 것이 아니라, 좋은 테스트가 필요하다. 다음 절에서는 이것이 의미하는 바를 정의한다.
