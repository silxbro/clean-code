# 마이크로서비스는 어떤가?
<br/>

마이크로서비스 아키텍처에는 개별 문제에 대한 해결책이 단지 단일 프로그램으로 컴파일되는 라이브러리 수준이 아니라 독립적으로 실행되는 서비스로 배포된다.
즉, 시스템이 여러 개의 소규모 프로그램으로 분할되어 특정 작업만 전문적으로 수행한다. 이런 소규모 프로그램은 API를 통해 원격으로 호출할 수 있는 전용 서비스로 배포된다.
마이크로 서비스는 여러 가지 이점을 가지고 있으며 최근 몇 년간 점점 더 인기를 끌고 있다. 이러한 아키텍처는 현재 많은 조직과 팀에서 가야 할 방향으로 고정되고 있다.

마이크로서비스를 사용할 때 코드 구조를 만들고 코드에 추상화 계층을 만드는 것은 중요하지 않다는 주장을 듣게 될 수도 있다.
그 이유는 마이크로서비스 자체가 간결한 추상화 계층을 제공하기 때문이고, 내부의 코드가 어떻게 구성되고 나눠지는지는 중요하지 않다는 것이다.
마이크로서비스는 일반적으로 꽤 간결한 추상화 계층을 제공하는 것이 사실이지만, 대개 크기와 범위를 기준으로 마이크로서비스를 나누기 때문에
여전히 그 내부에서 적절한 추상화 계층을 고려하는 것이 유용하다.

이를 설명하기 위해 독자가 현재 온라인 소매업체에서 재고를 확인하고 수정하는 마이크로서비스의 개발과 유지보수를 담당하는 팀에 속해 있다고 가정해보자.
이 마이크로서비스는 다음 상황이 발생하면 호출된다.
- 제품이 새로 창고에 도착한다.
- 사용자게에 그 제품을 보여주기 위해 프런트엔드에서 제품의 재고가 있는지 확인한다.
- 고객이 제품을 구매한다.

명목상 이 마이크로서비스는 재고 수준 관리라는 한 가지 일만 한다. 그러나 이 '한 가지'를 수행하기 위해 해결해야 할 하위 문제가 많다는 것을 바로 알 수 있다.
- 재고 항목의 개념, 즉 실제로 추적하고 있는 것이 무엇인지 다루는 일
- 재고가 있는 창고 및 위치가 여러 군데일 때 처리하는 방법
- 재고가 있는 제품이라도 창고로부터 고객의 배송 주소까지의 거리에 따라 한 국가의 고객에겐 재고가 있을 수 있지만, 다른 국가의 고객에겐 재고가 없을 수 있다는 개념
- 실제 재고 수준 데이터가 저장된 데이터베이스와의 인터페이스
- 데이터베이스에 저장된 값의 해석

문제를 해결할 때 하위 문제로 나누는 방법에 대해 이전에 언급했던 모든 내용이 마이크로서비스에도 여전히 적용된다.
예를 들어 특정 고객에 대해 어떤 품목이 재고가 있는지를 결정하는 것은 다음과 같은 하위 문제를 포함한다.
- 고객의 범위 내에 있는 창고 결정
- 이 범위 내에 있는 창고로부터 항목의 재고를 찾기 위해 데이터 저장소에 질의
- 데이터베이스에서 반환되는 데이터 형식 해석
- 서비스 호출자에게 결과를 반환

게다가 다른 개발자들도 이 논리를 일부 재사용하고 싶어 할 가능성이 크다.
회사 내에는 회사가 어떤 품목의 생산을 중단해야 할지, 재고를 더 많이 보유해야 할지, 특별 행사를 진행해야 할지 결정하기 위해 분석 및 추세를 추적하는 다른 팀이 있을 수 있다.
효율성 및 시간 지연의 이유로 이 팀은 해당 마이크로서비스를 호출하는 대신 파이프라인을 사용하여 재고 데이터베이스를 직접 검색할 수 있다.
하지만 데이터베이스에서 반환된 데이터를 해석하기 위한 노력이 여전히 필요할 수 있으므로 이 부분에 대한 코드를 재사용할 수 있다면 다른 팀에게 도움이 된다.

마이크로서비스는 시스템을 분리하여 보다 모듈화할 수 있는 매우 좋은 방법이지만, 서비스를 구현하기 위해 여러 하위 문제를 해결해야 한다는 사실은 바뀌지 않는다.
올바른 추상화 및 코드 계층을 만드는 것은 여전히 중요하다.
