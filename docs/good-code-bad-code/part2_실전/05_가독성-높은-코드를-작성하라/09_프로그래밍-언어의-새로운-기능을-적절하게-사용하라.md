# 프로그래밍 언어의 새로운 기능을 적절하게 사용하라
<br/>

사람들은 반짝반짝 윤이 나는 새로운 것을 좋아하는데 개발자들도 별반 다르지 않다.
많은 프로그래밍 언어들이 여전히 활발하게 개발되고 있으며, 때때로 프로그래밍 언어 설계자들은 멋지고, 새롭고, 빛나는 기능을 추가한다.
이 경우 개발자들은 이 새로운 기능을 활용하기를 원한다.

프로그래밍 언어 설계자는 새로운 기능을 추가하기 전에 매우 신중하게 생각하기 때문에 새로운 기능으로 인해 코드의 가독성이 높아지거나 코드가 더 견고해지는 경우가 많이 있을 수 있다.
새로운 기능으로 인해 코드가 개선되기 때문에 개발자들이 이런 기능을 사용하는 것에 흥분하는 것은 좋은 일이다.
하지만 프로그래밍 언어의 그런 새로운 기능을 사용하고 싶은 마음이 간절히 들 때, 그것이 정말로 그 일에 가장 적합한 도구인지 솔직하게 생각해봐야 한다.
<br/>
<br/>
## 1. 새 기능은 코드를 개선할 수 있다
자바 8이 스트림을 도입했을 때 많은 개발자는 흥분했는데, 이것을 통해 훨씬 더 간결한 함수형 스타일의 코드 작성이 가능했기 때문이다.
스트림이 어떻게 코드를 개선할 수 있는지에 대한 예시를 위해 다음 예제 5.31을 살펴보자.
예제 코드 5.31은 문자열 리스트를 받아서 빈 것은 걸러내는 작업을 수행하는 함수가 전통적인 자바 코드로 어떻게 작성되는지 보여준다.

#### [예제 5.31] 전통적인 자바 코드로 작성된 리스트 필터링
```java
List<String> getNonEmptyStrings(List<String> strings) {
  List<String> nonEmptyStrings = new ArrayList<>();
  for (String str : strings) {
    if (!str.isEmpty()) {
      nonEmptyStrings.add(str);
    }
  }
  return nonEmptyStrings;
}
```
이 코드를 스트림을 사용해 작성하면 더 간결하고 이해하기 쉬운 코드가 된다. 다음 예제 코드는 스트림과 필터를 사용하여 동일한 기능을 구현하는 방법을 보여준다.

#### [예제 5.32] 스트림을 사용한 리스트 필터링
```java
List<String> getNonEmptyStrings(List<String> strings) {
  return strings
      .stream()
      .filter(str -> !str.isEmpty())
      .collect(toList());
}
```
코드가 읽기 쉽고 간결해졌기 때문에 스트림을 잘 사용한 것처럼 보인다.
무언가를 직접 만드는 대신 언어에서 제공하는 기능을 사용하면 코드가 최적화되어 효율적이고 버그가 없을 가능성이 커진다.
일반적으로 코드의 품질을 개선한다면 언어가 제공하는 기능을 사용하는 것이 좋다(그러나 다음 두 하위 절을 참조하라).

## 2. 불분명한 기능은 혼동을 일으킬 수 있다
프로그래밍 언어에서 제공하는 기능이 확실한 이점을 가지고 있다 하더라도 해당 기능이 다른 개발자에게 얼마나 잘 알려져 있는지 고려할 필요가 있다.
이를 위해서는 일반적으로 현재의 구체적인 상황과 궁극적으로 누가 코드를 유지보수할지에 대한 고민이 필요하다.

규모가 크지 않은 자바 코드를 유지보수하고 있고, 다른 개발자가 자바 스트림에 익숙하지 않다면 스트림을 사용하지 않는 것이 좋을 수도 있다.
이 상황에서는 스트림을 사용해서 얻을 수 있는 코드 개선이 그것이 초래할 혼란에 비해 상대적으로 미미할 수 있다.

일반적으로 코드 품질을 개선한다면 언어가 제공하는 기능을 사용하는 것이 바람직하다.
그러나 개선 사항이 적거나 다른 개발자가 그 기능에 익숙하지 않다면 차라리 사용하지 않는 것이 좋을 때도 있다.

## 3. 작업에 가장 적합한 도구를 사용하라
자바 스트림은 아주 다재다능하고 이것으로 많은 문제를 해결할 수 있다. 그렇다고 해서 스트림이 언제나 문제를 해결하기 위한 최상의 방법이라는 것을 의미하지는 않는다.
맵 자료구조에서 어떤 키에 대한 값을 찾아야 한다면, 이것을 위한 가장 합리적인 코드는 다음과 같을 것이다.
```java
String value = map.get(key);
```
하지만 맵의 항목을 스트림으로 가져와서 키를 기반으로 필터링함으로써 이 문제를 해결할 수도 있다.
예제 5.33 코드는 이에 대해 보여준다. 이 코드는 맵에서 값을 얻기 위한 특별히 좋은 방법은 아니라는 점을 분명히 알 수 있다.
map.get()보다 가독성이 훨씬 떨어질 뿐만 아니라 (맵의 모든 항목을 확인해야 할 수도 있기 때문에) 효율성도 훨씬 낮다.

#### [예제 5.33] 스트림을 사용하여 맵에서 값을 얻기
```java
Optional<String> value = map
    .entrySet()
    .stream()
    .filter(entry -> entry.getKey().equals(key))
    .map(Entry::getValue)
    .findFirst();
```
예제 5.33의 코드는 논점을 입증하기 위해 고안된 다소 과장된 예처럼 보일 수 있지만, 필자는 실제로 코드베이스에서 이것과 거의 동일한 코드를 본 적이 있다.

프로그래밍 언어에서 새로운 기능은 다 이유가 있기에 추가된다.
이런 새로운 기능을 사용하면 큰 이점이 있을 수 있지만 코드 작성에서와 동일하게 해당 기능이 단지 새로워서가 아니라 작업에 적합한 도구이기 때문에 사용한다는 점을 분명히 해야 한다.
